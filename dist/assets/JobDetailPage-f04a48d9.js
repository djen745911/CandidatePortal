import{i as w,u as D,r as i,e as J,s as C,j as e,a as h,b as d,B as L}from"./index-83d3308d.js";import{C as k,a as I,b as S,c as T,d as A,e as E}from"./card-50842a49.js";import{L as F}from"./loader-2-9b3534bc.js";import{m as b}from"./motion-d59b358d.js";import{A as $}from"./alert-triangle-0d676add.js";import{A as f}from"./arrow-left-2595241a.js";import{M as P,D as B}from"./map-pin-a03f6a3c.js";import{C as _}from"./clock-290011e6.js";import{F as z}from"./file-text-7c1dfec9.js";const V=()=>{const{jobId:s}=w(),{user:l,profile:n}=D(),[t,x]=i.useState(null),[u,p]=i.useState(!0),[g,o]=i.useState(null),{toast:c}=J(),j=i.useCallback(async()=>{if(!s){o("No job ID provided."),p(!1);return}p(!0),o(null);try{const{data:a,error:r}=await C.from("jobs").select("id, title, company, location, salary, type, description, posted_at, Currency").eq("id",s).single();if(r)if(r.code==="PGRST116")x(null),o(`Job with ID ${s} not found.`),c({title:"Job Not Found",description:`The specific job (ID: ${s}) could not be located. It might have been removed.`,variant:"destructive"});else throw r;else a?x(a):(x(null),o(`Job with ID ${s} not found.`),c({title:"Job Not Found",description:`The specific job (ID: ${s}) could not be located.`,variant:"destructive"}))}catch(a){console.error("Error fetching job details:",a),o(a.message||"Failed to fetch job details."),c({title:"Error Loading Job",description:`Could not load job details: ${a.message}`,variant:"destructive"})}finally{p(!1)}},[s,c]);i.useEffect(()=>{j()},[j]);const y=(a,r)=>{if(!a)return"Not Disclosed";const v=String(a).replace(/[^0-9.-]+/g,"");return`${r||""}${v}`};if(u)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 text-white flex flex-col items-center justify-center p-6",children:[e.jsx(F,{className:"h-16 w-16 text-indigo-400 animate-spin mb-6"}),e.jsx("p",{className:"text-2xl text-indigo-300",children:"Loading Job Details..."})]});if(g||!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-red-900 text-white flex flex-col items-center justify-center p-6 text-center",children:e.jsxs(b.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5},children:[e.jsx($,{className:"h-20 w-20 text-red-400 mx-auto mb-6"}),e.jsx("h1",{className:"text-4xl font-bold mb-4 text-red-300",children:"Job Not Found"}),e.jsx("p",{className:"text-xl text-red-400 mb-2",children:g||"The job you are looking for does not exist or may have been removed."}),e.jsx("p",{className:"text-sm text-gray-300 mb-8",children:"Please check the job ID or try browsing other available positions."}),e.jsx(h,{to:"/jobs",children:e.jsxs(d,{variant:"outline",className:"border-red-400 text-red-300 hover:bg-red-400 hover:text-white",children:[e.jsx(f,{className:"mr-2 h-5 w-5"})," Back to Jobs"]})})]})});const N=l&&n&&n.role==="candidate";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 text-white p-6",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsx(b.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:e.jsx(h,{to:"/jobs",children:e.jsxs(d,{variant:"ghost",className:"text-indigo-300 hover:bg-indigo-700/30 hover:text-indigo-100",children:[e.jsx(f,{className:"mr-2 h-5 w-5"})," Back to Jobs"]})})}),e.jsx(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},children:e.jsxs(k,{className:"bg-gray-800/60 backdrop-blur-sm border-gray-700 shadow-2xl",children:[e.jsxs(I,{className:"border-b border-gray-700 pb-6",children:[e.jsx(S,{className:"text-4xl font-bold text-indigo-300 mb-2",children:t.title}),e.jsx(T,{className:"text-xl text-purple-300",children:t.company})]}),e.jsxs(A,{className:"pt-6 grid md:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-indigo-200 border-b border-indigo-700 pb-2",children:"Job Description"}),e.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-line",children:t.description||"No description provided."})]}),e.jsxs("aside",{className:"space-y-6 p-6 bg-black/20 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-semibold text-indigo-200 mb-4",children:"Job Overview"}),e.jsx(m,{icon:e.jsx(P,{className:"h-5 w-5 text-gray-400"}),label:"Location",text:t.location||"Not specified"}),e.jsx(m,{icon:e.jsx(B,{className:"h-5 w-5 text-gray-400"}),label:"Salary",text:y(t.salary,t.Currency)}),e.jsx(m,{icon:e.jsx(_,{className:"h-5 w-5 text-gray-400"}),label:"Job Type",text:t.type||"Not specified"}),e.jsx(m,{icon:e.jsx(L,{className:"h-5 w-5 text-gray-400"}),label:"Posted",text:t.posted_at?new Date(t.posted_at).toLocaleDateString():"Not specified"})]})]}),e.jsx(E,{className:"border-t border-gray-700 pt-6",children:N?e.jsxs(d,{size:"lg",className:"bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 transform hover:scale-105 transition-all duration-300",children:[e.jsx(z,{className:"mr-2 h-5 w-5"})," Apply Now"]}):l?e.jsx("p",{className:"text-sm text-yellow-400",children:"Login as a candidate to apply for this job."}):e.jsx(h,{to:"/login",children:e.jsx(d,{size:"lg",className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800",children:"Login to Apply"})})})]})})]})})},m=({icon:s,label:l,text:n})=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 font-medium",children:l}),e.jsx("p",{className:"text-lg text-gray-200",children:n})]})]});export{V as default};

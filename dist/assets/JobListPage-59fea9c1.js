import{f,r,e as y,s as j,j as e,b as m,B as N,a as v,R as w}from"./index-8ded0fa8.js";import{C as k,a as S,b as C,c as F,d as L,e as E}from"./card-5e5ef74a.js";import{L as J}from"./loader-2-31b54a6b.js";import{m as h}from"./motion-b0a52920.js";import{M as I,D as P}from"./map-pin-37f7c9ce.js";import{C as R}from"./clock-7cab12e2.js";const M=f("ServerCrash",[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]]),O=()=>{const[a,l]=r.useState([]),[c,g]=r.useState(!0),[p,u]=r.useState(null),{toast:o}=y(),d=r.useCallback(async()=>{g(!0),u(null),console.log("Attempting to fetch jobs...");try{const{data:t,error:s,status:i,count:n}=await j.from("jobs").select("id, title, company, location, salary, type, description, posted_at, Currency",{count:"exact"}).order("posted_at",{ascending:!1});if(console.log("Supabase fetch response:",{data:t,supabaseError:s,status:i,count:n}),s)throw console.error("Supabase error fetching jobs:",{status:i,message:s.message,details:s.details,hint:s.hint}),s;l(t||[]),t&&t.length===0?(console.warn("Successfully fetched from 'jobs' table, but no jobs were returned. The table might be empty or filters (if any were applied) resulted in no matches. Count from Supabase:",n),o({title:"No Jobs Found",description:"The jobs table was queried successfully but returned no entries. It might be empty.",variant:"default",duration:5e3})):t?console.log(`Successfully fetched ${t.length} jobs. Count from Supabase: ${n}`):(console.warn("Supabase returned null data for jobs, but no explicit error. This is unusual. Count from Supabase:",n),o({title:"Empty Response",description:"Received an empty response from the database for jobs.",variant:"default",duration:5e3}))}catch(t){console.error("Catch block: Error fetching jobs:",t);const s=t.message||"Failed to fetch jobs. Please check console for details.";u(s),o({title:"Error Fetching Jobs",description:`Could not load job listings. ${s}. If RLS is disabled, check table name, columns, and network.`,variant:"destructive",duration:9e3})}finally{g(!1),console.log("Finished fetchJobs attempt. Loading set to false.")}},[o]);r.useEffect(()=>{d()},[d]);const b=(t,s)=>{if(!t)return"Not Disclosed";const i=String(t).replace(/[^0-9.-]+/g,"");return`${s||""}${i}`};return c?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 text-white p-6 flex flex-col items-center justify-center",children:[e.jsx(J,{className:"h-16 w-16 text-indigo-400 animate-spin mb-6"}),e.jsx("p",{className:"text-2xl text-indigo-300",children:"Loading job opportunities..."}),e.jsx("p",{className:"text-md text-indigo-400 mt-2",children:"Please wait a moment. Checking the job board..."})]}):p?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-red-900 to-pink-900 text-white p-6 flex flex-col items-center justify-center text-center",children:[e.jsx(M,{className:"h-20 w-20 text-red-400 mb-6"}),e.jsx("h1",{className:"text-4xl font-bold text-red-300 mb-3",children:"Something Went Wrong"}),e.jsx("p",{className:"text-xl text-red-400 mb-4",children:"We couldn't load the job listings."}),e.jsx("p",{className:"text-sm text-gray-300 bg-black/30 p-3 rounded-md mb-6 max-w-md",children:p}),e.jsx("p",{className:"text-md text-indigo-300 mb-2",children:"Please check your internet connection. Since RLS is disabled, verify the 'jobs' table name and columns in your Supabase project."}),e.jsx("p",{className:"text-md text-indigo-300 mb-6",children:"Open the browser console (F12) for more detailed error messages from Supabase."}),e.jsx(m,{onClick:d,className:"bg-indigo-600 hover:bg-indigo-700 text-white py-3 px-6 text-lg",children:"Try Again"})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 text-white p-6",children:e.jsxs(h.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"container mx-auto",children:[e.jsxs("header",{className:"mb-12 text-center",children:[e.jsx("h1",{className:"text-5xl font-extrabold mb-4 tracking-tight bg-gradient-to-r from-purple-400 to-indigo-400 bg-clip-text text-transparent",children:"Explore Job Opportunities"}),e.jsx("p",{className:"text-xl text-indigo-300",children:"Find your next career move with us."})]}),e.jsxs("div",{className:"mb-8 p-6 bg-black/20 backdrop-blur-md rounded-lg shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-semibold text-indigo-200 mb-4",children:"Filter Jobs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Keywords (e.g., React, Python)",className:"w-full p-3 rounded-md bg-gray-700 border border-gray-600 focus:ring-indigo-500 focus:border-indigo-500 text-white placeholder-gray-400"})}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Location (e.g., New York, Remote)",className:"w-full p-3 rounded-md bg-gray-700 border border-gray-600 focus:ring-indigo-500 focus:border-indigo-500 text-white placeholder-gray-400"})}),e.jsx("div",{children:e.jsxs("select",{className:"w-full p-3 rounded-md bg-gray-700 border border-gray-600 focus:ring-indigo-500 focus:border-indigo-500 text-white",children:[e.jsx("option",{value:"",className:"text-gray-400 bg-gray-800",children:"Job Type"}),e.jsx("option",{value:"Full-time",className:"bg-gray-800",children:"Full-time"}),e.jsx("option",{value:"Part-time",className:"bg-gray-800",children:"Part-time"}),e.jsx("option",{value:"Contract",className:"bg-gray-800",children:"Contract"}),e.jsx("option",{value:"Internship",className:"bg-gray-800",children:"Internship"})]})}),e.jsx(m,{className:"bg-indigo-600 hover:bg-indigo-700 h-full text-white",children:"Search"})]})]}),!c&&a.length===0&&e.jsxs(h.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.4},className:"text-center text-2xl text-gray-300 mt-16 py-12 bg-black/20 backdrop-blur-sm rounded-lg shadow-xl",children:[e.jsx(N,{className:"h-16 w-16 mx-auto text-indigo-400 mb-4"}),e.jsx("p",{className:"font-semibold",children:"No Job Opportunities Found"}),e.jsxs("p",{className:"text-lg text-gray-400 mt-2",children:["It seems there are no jobs posted at the moment. ",e.jsx("br",{}),"Please check your Supabase 'jobs' table to ensure it has entries."]}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"(If you're an administrator, ensure jobs are published.)"})]}),!c&&a.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map((t,s)=>e.jsx(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:s*.05},children:e.jsxs(k,{className:"bg-gray-800/60 backdrop-blur-sm border-gray-700 hover:border-indigo-500/50 transition-all duration-300 transform hover:-translate-y-1 shadow-lg hover:shadow-indigo-500/30 flex flex-col h-full",children:[e.jsxs(S,{children:[e.jsx(C,{className:"text-2xl text-indigo-300 line-clamp-2",children:t.title}),e.jsx(F,{className:"text-purple-300",children:t.company})]}),e.jsxs(L,{className:"space-y-3 flex-grow",children:[e.jsx(x,{icon:e.jsx(I,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),text:t.location||"Not Specified"}),e.jsx(x,{icon:e.jsx(P,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),text:b(t.salary,t.Currency)}),e.jsx(x,{icon:e.jsx(R,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}),text:t.type||"Not Specified"}),e.jsx("p",{className:"text-gray-400 text-sm line-clamp-3",children:t.description||"No description available."})]}),e.jsx(E,{className:"mt-auto pt-4",children:e.jsx(v,{to:`/jobs/${t.id}`,className:"w-full",children:e.jsx(m,{variant:"outline",className:"w-full border-indigo-500 text-indigo-300 hover:bg-indigo-500 hover:text-white transition-colors duration-200",children:"View Details"})})})]})},t.id))})]})})},x=({icon:a,text:l})=>e.jsxs("div",{className:"flex items-start space-x-2",children:[w.cloneElement(a,{className:`${a.props.className} flex-shrink-0`}),e.jsx("span",{className:"text-gray-300",children:l})]});export{O as default};

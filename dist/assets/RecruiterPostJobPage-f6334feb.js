import{f as y,R as N,j as e,k as _,u as F,c as L,e as D,r as v,a as P,b as j,B as g,s as q}from"./index-83d3308d.js";import{I as d}from"./input-5b7e13be.js";import{L as b}from"./label-df643573.js";import{C as J,a as S,b as T,c as E,d as R,e as A}from"./card-50842a49.js";import{m as f}from"./motion-d59b358d.js";import{A as M}from"./arrow-left-2595241a.js";import{M as I,D as U}from"./map-pin-a03f6a3c.js";import{F as B}from"./file-plus-fe3365bd.js";import{L as $}from"./loader-2-9b3534bc.js";const H=y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),G=y("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),z=y("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Q=y("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),C=N.forwardRef(({className:i,...l},r)=>e.jsx("textarea",{className:_("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:r,...l}));C.displayName="Textarea";const se=()=>{const{user:i}=F(),l=L(),{toast:r}=D(),[o,m]=v.useState(!1),[a,k]=v.useState({title:"",company:"",location:"",salary:"",Currency:"USD",job_type:"Full-time",description:"",skills_required:"",experience_level:"Entry",is_active:!0}),s=p=>{const{name:u,value:h,type:x,checked:n}=p.target;k(c=>({...c,[u]:x==="checkbox"?n:h}))},w=async p=>{if(p.preventDefault(),!i){r({title:"Authentication Error",description:"You must be logged in to post a job.",variant:"destructive"});return}if(!a.title||!a.company||!a.location||!a.description){r({title:"Missing Required Fields",description:"Please fill in all required fields (Title, Company, Location, Description).",variant:"destructive"});return}m(!0);const u=a.skills_required.split(",").map(c=>c.trim()).filter(c=>c),h={title:a.title,company:a.company,location:a.location,salary:a.salary||null,Currency:a.Currency,type:a.job_type,description:a.description,skills_required:u.length>0?u:null,experience_level:a.experience_level,is_active:a.is_active,recruiter_id:i.id,PostedLinkedin:!1},{data:x,error:n}=await q.from("jobs").insert([h]).select().single();m(!1),n?(console.error("Supabase error:",n),r({title:"Job Post Failed",description:`Error: ${n.message}. Check console for details.`,variant:"destructive"})):x?(r({title:"Job Posted Successfully!",description:`${x.title} is now live.`,variant:"default"}),l("/recruiter/jobs")):r({title:"Job Post Issue",description:"Job may have posted, but no confirmation data was returned.",variant:"destructive"})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-teal-800 via-cyan-900 to-sky-900 text-white p-6",children:e.jsxs("div",{className:"container mx-auto",children:[e.jsxs(f.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[e.jsx(P,{to:"/recruiter/dashboard",children:e.jsxs(j,{variant:"ghost",className:"text-cyan-300 hover:bg-cyan-700/30 hover:text-cyan-100 mb-4",children:[e.jsx(M,{className:"mr-2 h-5 w-5"})," Back to Dashboard"]})}),e.jsx("h1",{className:"text-4xl font-bold text-cyan-300",children:"Post a New Job"}),e.jsx("p",{className:"text-lg text-gray-300",children:"Fill in the details to find your next top talent."})]}),e.jsx(f.form,{onSubmit:w,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},children:e.jsxs(J,{className:"bg-gray-800/70 backdrop-blur-sm border-gray-700",children:[e.jsxs(S,{children:[e.jsxs(T,{className:"text-2xl text-cyan-300 flex items-center",children:[e.jsx(g,{className:"w-7 h-7 mr-3 text-teal-400"})," Job Details"]}),e.jsx(E,{className:"text-gray-400",children:"Provide comprehensive information about the role. Fields marked with * are required."})]}),e.jsxs(R,{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(t,{icon:e.jsx(g,{className:"text-teal-400"}),label:"Job Title *",htmlFor:"title",children:e.jsx(d,{id:"title",name:"title",value:a.title,onChange:s,required:!0,className:"bg-gray-700 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500"})}),e.jsx(t,{icon:e.jsx(g,{className:"text-teal-400"}),label:"Company Name *",htmlFor:"company",children:e.jsx(d,{id:"company",name:"company",value:a.company,onChange:s,required:!0,className:"bg-gray-700 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500"})}),e.jsx(t,{icon:e.jsx(I,{className:"text-teal-400"}),label:"Location *",htmlFor:"location",children:e.jsx(d,{id:"location",name:"location",value:a.location,onChange:s,required:!0,className:"bg-gray-700 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500"})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(t,{icon:e.jsx(U,{className:"text-teal-400"}),label:"Salary Range",htmlFor:"salary",className:"flex-grow",children:e.jsx(d,{id:"salary",name:"salary",value:a.salary,onChange:s,placeholder:"e.g., 80000 - 100000",className:"bg-gray-700 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500"})}),e.jsxs(t,{label:"Currency",htmlFor:"Currency",className:"w-1/3",children:[" ",e.jsxs("select",{id:"Currency",name:"Currency",value:a.Currency,onChange:s,className:"w-full p-2.5 rounded-md bg-gray-700 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500 text-white",children:[e.jsx("option",{value:"USD",children:"USD"}),e.jsx("option",{value:"EUR",children:"EUR"}),e.jsx("option",{value:"GBP",children:"GBP"}),e.jsx("option",{value:"CAD",children:"CAD"}),e.jsx("option",{value:"AUD",children:"AUD"}),e.jsx("option",{value:"INR",children:"INR"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(t,{icon:e.jsx(Q,{className:"text-teal-400"}),label:"Job Type",htmlFor:"job_type",children:[" ",e.jsxs("select",{id:"job_type",name:"job_type",value:a.job_type,onChange:s,className:"w-full p-2.5 rounded-md bg-gray-700 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500 text-white",children:[e.jsx("option",{value:"Full-time",children:"Full-time"}),e.jsx("option",{value:"Part-time",children:"Part-time"}),e.jsx("option",{value:"Contract",children:"Contract"}),e.jsx("option",{value:"Internship",children:"Internship"}),e.jsx("option",{value:"Temporary",children:"Temporary"})]})]}),e.jsx(t,{icon:e.jsx(z,{className:"text-teal-400"}),label:"Skills Required (comma-separated)",htmlFor:"skills_required",children:e.jsx(d,{id:"skills_required",name:"skills_required",value:a.skills_required,onChange:s,placeholder:"e.g., React, Node.js, SQL",className:"bg-gray-700 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500"})}),e.jsx(t,{icon:e.jsx(H,{className:"text-teal-400"}),label:"Experience Level",htmlFor:"experience_level",children:e.jsxs("select",{id:"experience_level",name:"experience_level",value:a.experience_level,onChange:s,className:"w-full p-2.5 rounded-md bg-gray-700 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500 text-white",children:[e.jsx("option",{value:"Entry",children:"Entry Level"}),e.jsx("option",{value:"Junior",children:"Junior Level"}),e.jsx("option",{value:"Mid",children:"Mid Level"}),e.jsx("option",{value:"Senior",children:"Senior Level"}),e.jsx("option",{value:"Lead",children:"Lead/Manager"}),e.jsx("option",{value:"Executive",children:"Executive"})]})}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",name:"is_active",checked:a.is_active,onChange:s,className:"h-4 w-4 text-cyan-500 border-gray-600 rounded focus:ring-cyan-500 bg-gray-700"}),e.jsx(b,{htmlFor:"is_active",className:"text-gray-300",children:"Make this job listing active immediately"})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-1",children:[e.jsxs(b,{htmlFor:"description",className:"text-gray-300 flex items-center",children:[e.jsx(B,{className:"w-5 h-5 mr-2 text-teal-400"}),"Job Description *"]}),e.jsx(C,{id:"description",name:"description",value:a.description,onChange:s,rows:8,required:!0,placeholder:"Provide a detailed job description, responsibilities, and requirements...",className:"bg-gray-700 border-gray-600 focus:border-cyan-500 focus:ring-cyan-500"})]})]}),e.jsx(A,{children:e.jsxs(j,{type:"submit",disabled:o,size:"lg",className:"bg-gradient-to-r from-cyan-500 to-teal-600 hover:from-cyan-600 hover:to-teal-700 transform hover:scale-105 transition-all duration-300",children:[o?e.jsx($,{className:"w-5 h-5 mr-2 animate-spin"}):e.jsx(G,{className:"w-5 h-5 mr-2"}),o?"Posting Job...":"Post Job"]})})]})})]})})},t=({icon:i,label:l,htmlFor:r,children:o,className:m})=>e.jsxs("div",{className:`space-y-1 ${m||""}`,children:[e.jsxs(b,{htmlFor:r,className:"text-gray-300 flex items-center",children:[N.cloneElement(i,{className:`w-5 h-5 mr-2 flex-shrink-0 ${i.props.className}`}),l]}),o]});export{se as default};

import{u as B,e as P,r as c,j as e,N as $,a as r,b as n,B as w,s as p}from"./index-83d3308d.js";import{C as d,d as x,a as A,b as D,c as k}from"./card-50842a49.js";import{L as j}from"./loader-2-9b3534bc.js";import{m as i}from"./motion-d59b358d.js";import{A as F}from"./alert-triangle-0d676add.js";import{S as U}from"./search-8d65c023.js";import{F as C}from"./file-text-7c1dfec9.js";import{F as V}from"./filter-969e3e59.js";import{M as S,D as q}from"./map-pin-a03f6a3c.js";import{C as H}from"./clock-290011e6.js";const se=()=>{const{user:t,profile:s,loading:l}=B(),{toast:m}=P(),[y,T]=c.useState([]),[u,E]=c.useState([]),[b,f]=c.useState(!0),[J,L]=c.useState(!1);return c.useEffect(()=>{(async()=>{if(t){f(!0);try{const{data:a,error:N}=await p.from("jobs").select("*").eq("is_active",!0).order("posted_at",{ascending:!1}).limit(3);if(N)throw N;T(a||[]);const{data:_,error:v}=await p.from("applications").select(`
            id,
            applied_at,
            status,
            job:jobs (
              id,
              title,
              company,
              location
            )
          `).eq("candidate_id",t.id).order("applied_at",{ascending:!1}).limit(3);if(v)throw v;E(_||[]);const{data:R,error:h}=await p.from("resumes").select("id").eq("candidate_id",t.id).single();if(h&&h.code!=="PGRST116")throw h;L(!!R)}catch(a){console.error("Error fetching data:",a),m({title:"Error Loading Data",description:a.message,variant:"destructive"})}finally{f(!1)}}})()},[t,m]),l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900",children:e.jsx(j,{className:"h-12 w-12 animate-spin text-indigo-400"})}):!t||s&&s.role!=="candidate"?e.jsx($,{to:"/login",replace:!0}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 text-white",children:[e.jsx("section",{className:"pt-12 pb-6 px-6",children:e.jsx("div",{className:"container mx-auto",children:e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:["Welcome Back, ",(s==null?void 0:s.full_name)||"Candidate","!"]}),e.jsx("p",{className:"text-xl text-indigo-300",children:"Your journey to the perfect role starts here."})]})})}),!J&&e.jsx(i.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"container mx-auto px-6 mb-8",children:e.jsxs("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-6 w-6 text-yellow-400 mr-3"}),e.jsx("p",{className:"text-yellow-300",children:"Upload your resume to start applying for jobs!"})]}),e.jsx(r,{to:"/candidate/profile",children:e.jsx(n,{variant:"outline",className:"border-yellow-400 text-yellow-300 hover:bg-yellow-400 hover:text-black",children:"Upload Resume"})})]})}),e.jsxs("div",{className:"container mx-auto px-6 space-y-8",children:[e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(g,{icon:e.jsx(U,{className:"h-6 w-6 text-purple-400"}),title:"Find Jobs",description:"Browse latest opportunities",linkTo:"/jobs"}),e.jsx(g,{icon:e.jsx(C,{className:"h-6 w-6 text-blue-400"}),title:"My Applications",description:"Track your applications",linkTo:"/candidate/applications"}),e.jsx(g,{icon:e.jsx(w,{className:"h-6 w-6 text-cyan-400"}),title:"Update Profile",description:"Keep your info current",linkTo:"/candidate/profile"}),e.jsx(g,{icon:e.jsx(V,{className:"h-6 w-6 text-pink-400"}),title:"Job Preferences",description:"Set your preferences",linkTo:"/candidate/profile"})]}),e.jsxs(i.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-indigo-300",children:"Recent Job Postings"}),e.jsx(r,{to:"/jobs",children:e.jsx(n,{variant:"ghost",className:"text-indigo-300 hover:text-indigo-200",children:"View All Jobs"})})]}),b?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(j,{className:"h-8 w-8 animate-spin text-indigo-400"})}):y.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((o,a)=>e.jsx(M,{job:o,index:a},o.id))}):e.jsx(d,{className:"bg-gray-800/50 border-gray-700",children:e.jsxs(x,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(w,{className:"h-12 w-12 text-gray-500 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No jobs available at the moment."})]})})]}),e.jsxs(i.section,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.5},children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-indigo-300",children:"Recent Applications"}),e.jsx(r,{to:"/candidate/applications",children:e.jsx(n,{variant:"ghost",className:"text-indigo-300 hover:text-indigo-200",children:"View All Applications"})})]}),b?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(j,{className:"h-8 w-8 animate-spin text-indigo-400"})}):u.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map((o,a)=>e.jsx(Y,{application:o,index:a},o.id))}):e.jsx(d,{className:"bg-gray-800/50 border-gray-700",children:e.jsxs(x,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(C,{className:"h-12 w-12 text-gray-500 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"You haven't applied to any jobs yet."}),e.jsx(r,{to:"/jobs",className:"mt-4",children:e.jsx(n,{variant:"outline",className:"border-indigo-500 text-indigo-300 hover:bg-indigo-500 hover:text-white",children:"Browse Jobs"})})]})})]})]})]})},g=({icon:t,title:s,description:l,linkTo:m})=>e.jsx(r,{to:m,children:e.jsx(d,{className:"bg-gray-800/50 border-gray-700 hover:bg-gray-800/70 hover:border-indigo-500/50 transition-all duration-300",children:e.jsxs(x,{className:"flex items-center p-4",children:[e.jsx("div",{className:"mr-4 p-2 bg-gray-700/50 rounded-lg",children:t}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-indigo-300",children:s}),e.jsx("p",{className:"text-sm text-gray-400",children:l})]})]})})}),M=({job:t,index:s})=>e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:s*.1},children:e.jsxs(d,{className:"bg-gray-800/50 border-gray-700 hover:border-indigo-500/50 transition-all duration-300",children:[e.jsxs(A,{children:[e.jsx(D,{className:"text-xl text-indigo-300",children:t.title}),e.jsx(k,{className:"text-purple-300",children:t.company})]}),e.jsxs(x,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(S,{className:"h-4 w-4 mr-2 text-gray-400"}),t.location]}),e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(q,{className:"h-4 w-4 mr-2 text-gray-400"}),G(t.salary,t.Currency)]}),e.jsx(r,{to:`/jobs/${t.id}`,children:e.jsx(n,{className:"w-full mt-4 bg-indigo-600 hover:bg-indigo-700",children:"View Details"})})]})]})}),Y=({application:t,index:s})=>{const l={submitted:"text-blue-300 bg-blue-500/20",reviewing:"text-yellow-300 bg-yellow-500/20",accepted:"text-green-300 bg-green-500/20",rejected:"text-red-300 bg-red-500/20",default:"text-gray-300 bg-gray-500/20"};return e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:s*.1},children:e.jsxs(d,{className:"bg-gray-800/50 border-gray-700 hover:border-indigo-500/50 transition-all duration-300",children:[e.jsxs(A,{children:[e.jsx(D,{className:"text-xl text-indigo-300",children:t.job.title}),e.jsx(k,{className:"text-purple-300",children:t.job.company})]}),e.jsxs(x,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(S,{className:"h-4 w-4 mr-2 text-gray-400"}),t.job.location]}),e.jsxs("div",{className:"flex items-center text-gray-300",children:[e.jsx(H,{className:"h-4 w-4 mr-2 text-gray-400"}),"Applied: ",new Date(t.applied_at).toLocaleDateString()]}),e.jsx("div",{className:`inline-flex px-2 py-1 rounded-full text-sm ${l[t.status]||l.default}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),e.jsx(r,{to:`/jobs/${t.job.id}`,children:e.jsx(n,{variant:"outline",className:"w-full mt-2 border-indigo-500 text-indigo-300 hover:bg-indigo-500 hover:text-white",children:"View Job"})})]})]})})},G=(t,s="$")=>t?`${s}${t.toLocaleString()}`:"Not Disclosed";export{se as default};

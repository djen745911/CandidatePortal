import{f as L,u as E,e as A,r as l,j as e,N as y,a as N,b as k,g as R,B as w,s as d}from"./index-24deb802.js";import{m as u}from"./motion-9631c0a3.js";import{F as T}from"./file-plus-00685687.js";import{U as q}from"./users-9fe27279.js";const D=L("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),B=()=>{const{user:t,profile:a,signOut:r,loading:s}=E(),{toast:i}=A(),[m,h]=l.useState({totalJobs:0,totalApplications:0}),[p,o]=l.useState(!0);return l.useEffect(()=>{!s&&t?(async()=>{if(!t){o(!1);return}o(!0);try{const{count:c,error:b}=await d.from("jobs").select("id",{count:"exact",head:!0}).eq("recruiter_id",t.id);if(b)throw b;const{data:n,error:j}=await d.from("jobs").select("id").eq("recruiter_id",t.id);if(j)throw j;let g=0;if(n&&n.length>0){const S=n.map(J=>J.id),{count:C,error:f}=await d.from("applications").select("id",{count:"exact",head:!0}).in("job_id",S);if(f)throw f;g=C}h({totalJobs:c||0,totalApplications:g||0})}catch(c){console.error("Error fetching dashboard stats:",c),i({title:"Error",description:"Could not load dashboard statistics.",variant:"destructive"}),h({totalJobs:0,totalApplications:0})}finally{o(!1)}})():!s&&!t&&o(!1)},[t,s,i]),s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-teal-700 via-cyan-800 to-sky-900 text-white",children:e.jsx("p",{children:"Loading dashboard..."})}):t?a&&a.role!=="recruiter"?e.jsx(y,{to:a.role==="candidate"?"/candidate/area":"/",replace:!0}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-teal-700 via-cyan-800 to-sky-900 text-white",children:[e.jsx("header",{className:"bg-black/30 backdrop-blur-md shadow-lg p-4 sticky top-0 z-50",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsx(N,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-teal-400 to-cyan-400 bg-clip-text text-transparent",children:"Recruiter Hub"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-cyan-300",children:["Welcome, ",(a==null?void 0:a.full_name)||t.email]}),e.jsxs(k,{onClick:r,variant:"ghost",size:"sm",className:"text-red-400 hover:bg-red-500/20 hover:text-red-300",children:[e.jsx(R,{className:"mr-2 h-4 w-4"})," Logout"]})]})]})}),e.jsxs("main",{className:"container mx-auto p-6 mt-8",children:[e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx("h1",{className:"text-4xl font-semibold mb-8 text-cyan-300",children:"Recruiter Dashboard"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-10",children:[e.jsx(v,{icon:e.jsx(w,{className:"w-10 h-10 text-teal-300"}),title:"Total Jobs Posted",value:p?"Loading...":m.totalJobs,delay:.05}),e.jsx(v,{icon:e.jsx(D,{className:"w-10 h-10 text-sky-300"}),title:"Total Applications Received",value:p?"Loading...":m.totalApplications,delay:.1})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(x,{icon:e.jsx(T,{className:"w-10 h-10 text-teal-400"}),title:"Post New Job",description:"Create and publish new job listings.",linkTo:"/recruiter/jobs/new",delay:.15}),e.jsx(x,{icon:e.jsx(w,{className:"w-10 h-10 text-cyan-400"}),title:"Manage Jobs",description:"View and edit your active job posts.",linkTo:"/recruiter/jobs",delay:.2}),e.jsx(x,{icon:e.jsx(q,{className:"w-10 h-10 text-sky-400"}),title:"View Applicants",description:"Review candidates for your jobs. Select a job from 'Manage Jobs' to view its applicants.",linkTo:"/recruiter/jobs",delay:.25})]})]}),e.jsx("footer",{className:"py-8 mt-12 text-center text-gray-300 border-t border-cyan-700/50",children:e.jsxs("p",{children:["Â© ",new Date().getFullYear()," Recruiter Hub. Find your next top talent."]})})]}):e.jsx(y,{to:"/recruiter/login",replace:!0})},v=({icon:t,title:a,value:r,delay:s})=>e.jsxs(u.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{duration:.4,delay:s,ease:"easeOut"},className:"bg-gray-800/50 backdrop-blur-md p-6 rounded-xl shadow-lg flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-black/20 rounded-lg",children:t}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-400 text-sm font-medium",children:a}),e.jsx("p",{className:"text-3xl font-bold text-white",children:r})]})]}),x=({icon:t,title:a,description:r,linkTo:s,delay:i})=>e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,delay:i,ease:"easeOut"},className:"bg-gray-800/40 backdrop-blur-sm p-6 rounded-xl shadow-xl hover:shadow-cyan-500/30 transition-shadow duration-300 flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[t,e.jsx("h2",{className:"text-2xl font-semibold text-cyan-200",children:a})]}),e.jsx("p",{className:"text-gray-300 mb-6 flex-grow",children:r}),e.jsx(N,{to:s,children:e.jsxs(k,{variant:"outline",className:"w-full border-cyan-500 text-cyan-300 hover:bg-cyan-500 hover:text-white transition-colors",children:["Go to ",a]})})]});export{B as default};
